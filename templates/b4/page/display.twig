{% extends '/b4/layout/base.twig' %}
{% form_theme form 'b4/form_theme/syno.twig' %}
{% block title %}Syno Storm{% endblock %} 
{% block body %}

    <div class="container">
        <div class="row container-sm justify-content-md-center ml-0">

            <div class="questions">
                {% if page.content is defined and '' != page.content %}
                <div class="col-12">
                    <div class="page__content rounded p-3 bg-white mb-5">
                        {{ page.content|raw }}
                    </div>
                </div>
                {% endif %}

                <div class="col-12">
                    {{ form_start(form) }}

                    {% for question in page.questions %}
                        {% if question.isMatrix %}
                            {% include 'b4/page/_matrix.twig' %}
                        {% elseif question.isLinearScale %}
                            {{ form_row(attribute(form, (question.getInputName))) }}
                        {% elseif question.isLinearScaleMatrix %}
                            <section class="mb-5 rounded bg-white p-5">
                                <h5 class="text-center m-0 pb-4"> {{ question.getText() }}</h5>
                                {% for key,row in question.getRows() %}
                                    {{ form_row(attribute(form, (key))) }}
                                {% endfor %}
                            </section>
                        {% elseif question.isText %}
                            {% for answer in question.answers %}
                                <section class="mb-5 rounded bg-white p-5">
                                    <h5 class="text-center m-0 pb-4">
                                        {{ question.getText() }}
                                    </h5>
                                    {{ form_row(attribute(form, (answer.answerId)), {'label': false}) }}
                                </section>
                            {% endfor %}
                        {% else %}

                            <section class="mb-5 rounded bg-white p-5">
                                <h5 class="text-center m-0 pb-4 text-dark"> {{ question.getText() }}</h5>
                                    {{ form_widget(attribute(form, (question.getInputName))) }}
                            </section>
                        {% endif %}

                    {% endfor %}

                    <div class="row my-5">
                        <div class="col text-center">
                            <a class="btn btn-link btn-outline-secondary px-5 ml-2 mr-2 {% if backButtonDisabled %}disabled{% endif %}"
                               onclick="window.history.go(-1); return false;">
                                {{ 'page.button.back'|trans }}
                            </a>
                            {{ form_widget( form.next, { 'attr': {'class': 'btn btn-outline-primary px-5 ml-2 mr-2'}, 'label': 'page.button.next'|trans } ) }}
                        </div>
                    </div>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>

    {% if (response.isDebug) %}

        {% include 'b4/page/_debug.twig' %}

    {% elseif (response.isTest) %}

        {% include 'b4/page/_test.twig' %}

    {% else %}

        {% include 'b4/page/_footer.twig' %}

    {% endif %}
{% endblock %}
