commands:
  01_install_mongo:
    command: pecl7 install mongodb
    ignoreErrors: true
  # this is needed as phpredis package for PHP 7.3 is missing
  02_install_redis:
    # run this command from /tmp directory
    cwd: /tmp
    # don't run the command if phpredis is already installed (file /etc/php.d/redis.ini exists)
    test: '[ ! -f /etc/php.d/redis.ini ] && echo "redis not installed"'
    # executed only if test command succeeds
    command: |
      wget https://github.com/nicolasff/phpredis/zipball/master -O phpredis.zip \
      && unzip -o phpredis.zip \
      && cd phpredis-phpredis-* \
      && phpize \
      && ./configure \
      && make \
      && make install \
      && echo extension=redis.so > /etc/php.d/redis.ini
